{% import "macros.html.twig" as macros %}
{% extends 'base.html.twig' %}
{% block meta_title technology.titleSeo ?? technology.fullTitle %}
{% block meta_description technology.metaDescription ?? technology.fullTitle %}

{% block content %}
    <ol class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
        <li class="breadcrumb__item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a itemprop="item" href="{{ path('homepage') }}">
                <span itemprop="name">Accueil</span>
            </a>
            <meta itemprop="position" content="1" />
        </li>
        <li class="breadcrumb__item"  itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a itemprop="item" href="#">
                <span itemprop="name">{{ technology.name }}</span>
            </a>
            <meta itemprop="position" content="2" />
        </li>
    </ol>

    <div class="banner-technology">
        <h1 class="banner-technology__title">
        {% for title in technology.title %}
            {% if loop.first %}
                {{ title }}
            {% else %}
                <span>{{ title }}</span>
            {% endif %}
        {% endfor %}
        </h1>

        <div class="banner-technology__image">
            <img src="{{ asset(technology.logo) }}" alt="logo de {{ technology.name }}" class="logo">
        </div>
    </div>

    <div class="page-technology">

        {{ technology.content|raw }}

        <div class="bricks">
            {% include 'partials/brick-development.html.twig' %}
        </div>

        {% if caseStudies is not empty %}
            <h2 class="h2--dash">Projets créés avec {{ technology.name }}</h2>

            <ul class="article-list">
                {% for caseStudy in caseStudies %}

                    <li class="miniature-inline" data-aos="fade-up-left">
                    <a href="#" class="miniature-inline__image">
                        <span class="image" style="{{ macros.backgroundImageSrcset(caseStudy.images|first, 'case_study_thumbnail.md') }}"></span>
                    </a>
                    <div class="miniature-inline__content">
                        <span class="info">Client</span>
                        <a href="{{ path('case_study', { caseStudy: caseStudy.slug }) }}" class="title">
                            {{ caseStudy.title }}
                        </a>
                        <p class="description">{{ caseStudy.description }}</p>
                        <a href="{{ path('case_study', { caseStudy: caseStudy.slug }) }}" class="btn btn--secondary btn--animated">
                            <span>
                                   Voir l'étude de cas
                                <svg class="icon" xmlns="http://www.w3.org/2000/svg" x="0" y="0" viewBox="0 0 40 20">
                                    <path class="tip" d="M21,2.7 28.2,10.3 21,17.4"/>
                                    <path class="base" d="M28.2,10.3c-0.1,0-18.3,0-27.8,0"/>
                                </svg>
                            </span>
                        </a>
                    </div>
                </li>
            {% endfor %}

            </ul>
        {% endif %}

        {% if articles is not empty %}
            <h2 class="h2--dash">Articles liés à {{ technology.name }}</h2>
            <ul class="article-list">
                {% for article in articles %}
                <li class="miniature" data-aos="fade-in" data-aos-delay="{{ loop.index * 150 }}">
                    <a href="#" class="miniature__image">
                        <span class="image" style="{{ macros.backgroundImageSrcset(article.thumbnail, 'article_thumbnail.sm') }}"></span>
                    </a>
                    <div class="miniature__content">
                        <a href="{{ path('blog_article', { article: article.slug }) }}" class="title">{{ article.title }}</a>
                        <a href="{{ path('blog_article', { article: article.slug }) }}" class="link link--brand">Lire l'article</a>
                    </div>
                </li>
                {% endfor %}
            </ul>
        {% endif %}
    </div>

{% endblock content %}
